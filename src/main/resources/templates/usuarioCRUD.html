<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="plantilla/UITemplate :: cabecera">
<meta charset="ISO-8859-1">
<title>Usuarios</title>
</head>
<body>
	<div th:insert="plantilla/UITemplate :: menu"></div>
	<div class="container">
		
		<h3 class="text-center mt-4">LISTA DE USUARIOS</h3>
		<p>Usuario Logeado Codigo: <span th:text="${usuarioACtual.codigoUsuario}"></span></p>
		<p>Usuario Logeado UserName: <span th:text="${usuarioACtual.userName}"></span></p>
		
		<button type="button" class="btn btn-primary mt-5" data-toggle="modal" data-target="#modalUsuario" id="btn-nuevo"> 
			<i class="far fa-file"></i> Nuevo Usuario
		</button>
		<div class=" mt-2">
			<table class="table table-striped table-bordered mt-5" id="tableUsuarios">
				<thead>
					<tr>
						<th class="text-center">CODIGO</th>
						<th class="text-center">USERNAME</th>
						<th class="text-center">NOMBRE</th>
						<th class="text-center">APELLIDO</th>
						<th class="text-center">ROL</th>
						<th class="text-center"></th>
						<th class="text-center"></th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="row:${usuarios}">
						<td th:text="${row.codigoUsuario}"></td>
						<td th:text="${row.userName}"></td>
						<td th:text="${row.nombre}"></td>
						<td th:text="${row.apellido}"></td>
						<td th:text="${row.tbRol.descripcion}"></td>
						<td><a class="btn btn-info btn-editar" data-toggle="modal" data-target="#modalUsuario"><i
									class="far fa-edit"></i></a></td>
						<td><a class="btn btn-danger btn-eliminar"><i class="far fa-trash-alt"></i></a></td>
					</tr>
				</tbody>
			</table>
		</div>
		
		<div class="modal fade" id="modalUsuario" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered modal-login modal-lg">
				<div class="modal-content">
					<div class="modal-header bg-blue-darker">
						<h4 class="modal-title text-white">Usuario</h4>
					</div>
					<div class="modal-body">
						<form action="/usuario/registrar" method="post" id="idRegistra">
							<input type="hidden" id="idCodigo" name="codigo" value="0">
							<div class="container">
								<div class="row">
									<div class="form-group has-feedback col-md-12">
										<label for="exampleInputEmail1"><b>USERNAME</b></label><br>
										<i class="fas fa-file-signature form-control-feedback2"></i>
										<input type="text" class="form-control" id="idUserName"
											placeholder="Ingresar userName" name="userName">
									</div>
									<div class="form-group has-feedback col-md-12">
										<label for="exampleInputEmail1"><b>CONTRASEÑA</b></label><br>
										<i class="fas fa-file-signature form-control-feedback2"></i>
										<input type="text" class="form-control" id="idPassword"
											placeholder="Ingresar una contraseña" name="password">
									</div>
									<div class="form-group has-feedback col-md-12">
										<label for="exampleInputEmail1"><b>NOMBRE</b></label><br>
										<i class="fas fa-file-signature form-control-feedback2"></i>
										<input type="text" class="form-control" id="idNombre"
											placeholder="Ingresar nombre" name="nombre">
									</div>
									<div class="form-group has-feedback col-md-12">
										<label for="exampleInputEmail1"><b>APELLIDO</b></label><br>
										<i class="fas fa-file-signature form-control-feedback2"></i>
										<input type="text" class="form-control" id="idApellido"
											placeholder="Ingresar apellido" name="apellido">
									</div>
									<div class="form-group has-feedback col-md-6">
										<label for="exampleInputEmail1"><b>ROLES</b></label><br>
										<i class="fas fa-prescription-bottle-alt form-control-feedback2"></i>
										<select class="form-control" id="idRol" name="rol" onchange="mostrarCamposAdicionales()">
											<option value=" ">[Seleccione un Rol]</option>
											<option th:each="fila:${roles}" th:utext="${fila.descripcion}"
												th:value="${fila.idRol}" />
										</select>

									</div>										
								</div>				
								<div id="camposInvicibles" style="display:none;">
									    <div class="form-group has-feedback col-md-12">
									        <label for="exampleInputEmail1"><b>DNI</b></label><br>
									        <i class="fas fa-file-signature form-control-feedback2"></i>
									        <input type="text" class="form-control" id="idDni" placeholder="Ingrese un DNI" name="dni">
									    </div>
									
									    <div class="form-group has-feedback col-md-12">
									        <label for="exampleInputEmail1"><b>TELEFONO</b></label><br>
									        <i class="fas fa-file-signature form-control-feedback2"></i>
									        <input type="text" class="form-control" id="idTelefono" placeholder="Ingrese su número de telefono" name="telefono">
									    </div>
									    <div class="form-group has-feedback col-md-10">
										    <label for="exampleInputEmail1"><b>FECHA DE NACIMIENTO</b></label><br>
										    <i class="fas fa-calendar-alt form-control-feedback2"></i>
										    <input type="date" class="form-control" id="idFechaNacimiento" name="fechaNacimiento">
										</div>
								</div>
								<div id="camposInvicibles2" style="display:none;">
										<div class="form-group has-feedback col-md-6">
											<label for="exampleInputEmail1"><b>TIPO EMPLEADO</b></label><br>
											<i class="fas fa-prescription-bottle-alt form-control-feedback2"></i>
											<select class="form-control" id="idTipo" name="tipo">
												<option value=" ">[Seleccione el tipo de Empleado]</option>
												<option th:each="fila:${tipos}" th:utext="${fila.descripcion}"
													th:value="${fila.idTipo}" />
											</select>
										</div>							
								</div>
								<div class="col-md-12 text-center mt-4">
								<button type="submit" id="Guardar" class="btn btn-primary"><i class="fas fa-save"></i>
									Registrar </button>
								<button type="button" id="btn-cerrar" class="btn btn-danger" data-dismiss="modal"><i
										class="fas fa-undo-alt"></i> Cancelar </button>
							</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div th:insert="plantilla/UITemplate :: pie"></div>
</body>

	<script>
    function mostrarCamposAdicionales() {
        var rolSeleccionado = document.getElementById("idRol").value;
        var camposAdicionalesDiv = document.getElementById("camposInvicibles");
        camposAdicionalesDiv.style.display = (rolSeleccionado === "2" || rolSeleccionado === "3") ? "block" : "none";
        var campoAdicionalRol3 = document.getElementById("camposInvicibles2");
        campoAdicionalRol3.style.display = (rolSeleccionado === "3") ? "block" : "none";
    }
	</script>


</html>